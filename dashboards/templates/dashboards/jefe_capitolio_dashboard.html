{% extends 'base.html' %}

{% load static %}

{% block header_title %}ğŸ›ï¸ Control del Capitolio{% endblock %}

{% block extra_styles %}
    <link rel="stylesheet" href="{% static 'dashboards/css/jefe_capitolio_dashboard.css' %}">
{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
    <!-- Header del Dashboard -->
    <div class="dashboard-header">
    </div>

    <!-- NavegaciÃ³n de Acciones RÃ¡pidas -->
    <nav class="dashboard-nav">
        <div class="dashboard-nav-right">
            <a href="#resumen" class="nav-link active">Resumen</a>
            <a href="#distritos" class="nav-link">Distritos</a>
            <a href="{% url 'tournaments:tournament_list' %}" class="nav-link">Competencias</a>
            <a href="#reportes" class="nav-link">Reportes</a>
        </div>
    </nav>

    <!-- Contenedor principal del dashboard -->
    <div class="dashboard-container">
        <!-- EstadÃ­sticas principales -->
        <div class="stats-container">
        {% include 'dashboards/components/stats_card.html' with title="Total Tributos" value=stats.total_tributos icon="ğŸ‘¥" %}
        {% include 'dashboards/components/stats_card.html' with title="Competencias Activas" value=stats.competencias_activas icon="ğŸ®" color="info" %}
        {% include 'dashboards/components/stats_card.html' with title="Mentores" value=stats.total_mentores icon="ğŸ“" color="success" %}
        {% include 'dashboards/components/stats_card.html' with title="Vigilantes" value=stats.total_vigilantes icon="ğŸ‘ï¸" color="warning" %}
        </div>

        <!-- Contenido principal del dashboard -->
        <div class="dashboard-content">
<div class="dashboard-row">
    <div class="dashboard-col-8">
        <!-- Resumen Ejecutivo -->
        <div class="dashboard-card">
            <div class="card-header">
                <h3>ğŸ“Š Resumen Ejecutivo</h3>
                <select class="filter-select">
                    <option>Esta semana</option>
                    <option>Este mes</option>
                    <option>Este aÃ±o</option>
                </select>
            </div>
            <div class="executive-summary">
                <div class="summary-grid">
                    <div class="summary-item">
                        <h4>Nuevos Registros</h4>
                        <p class="big-number">{{ stats.nuevos_registros }}</p>
                        <span class="trend positive">â†‘ 12% vs. semana anterior</span>
                    </div>
                    <div class="summary-item">
                        <h4>ParticipaciÃ³n</h4>
                        <p class="big-number">{{ stats.tasa_participacion }}%</p>
                        <span class="trend positive">â†‘ 5% vs. mes anterior</span>
                    </div>
                    <div class="summary-item">
                        <h4>Competencias Completadas</h4>
                        <p class="big-number">{{ stats.competencias_completadas }}</p>
                        <span class="trend neutral">= Sin cambios</span>
                    </div>
                    <div class="summary-item">
                        <h4>SatisfacciÃ³n</h4>
                        <p class="big-number">4.5/5</p>
                        <span class="trend positive">â†‘ 0.3 puntos</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tributos por Distrito -->
        <div id="distritos" class="dashboard-card">
            <h3>ğŸ›ï¸ Tributos por Distrito</h3>
            <div class="district-overview">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Distrito</th>
                            <th>Tributos</th>
                            <th>UNPA</th>
                            <th>Externos</th>
                            <th>Acreditados</th>
                            <th>Activos</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for distrito in distritos_detalle %}
                        <tr>
                            <td><strong>Distrito {{ distrito.numero }}</strong></td>
                            <td>{{ distrito.total }}</td>
                            <td>{{ distrito.unpa }}</td>
                            <td>{{ distrito.externos }}</td>
                            <td><span class="badge badge-success">{{ distrito.acreditados }}</span></td>
                            <td><span class="badge badge-info">{{ distrito.activos }}</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Actividad del Sistema -->
        <div class="dashboard-card">
            <h3>ğŸ“ˆ Actividad del Sistema</h3>
            <div class="chart-placeholder">
                <p>GrÃ¡fico de actividad en el tiempo</p>
                <p class="subtitle">ImplementaciÃ³n futura con Chart.js</p>
            </div>
        </div>
    </div>

    <div class="dashboard-col-4">
        <!-- Acciones RÃ¡pidas -->
        {% include 'dashboards/components/quick_actions.html' with actions=jefe_actions %}
        
        <!-- ConfiguraciÃ³n RÃ¡pida -->
        <div class="dashboard-card">
            <h3>âš™ï¸ ConfiguraciÃ³n RÃ¡pida</h3>
            <div class="settings-list">
                <a href="{% url 'admin:index' %}" class="setting-item">
                    <span class="setting-icon">ğŸ”§</span>
                    <span>Panel de AdministraciÃ³n</span>
                </a>
                <a href="{% url 'tournaments:tournament_list' %}" class="setting-item">
                    <span class="setting-icon">ğŸ“</span>
                    <span>Gestionar Competencias</span>
                </a>
                <a href="{% url 'admin:capitol_personaje_changelist' %}" class="setting-item">
                    <span class="setting-icon">ğŸ‘¥</span>
                    <span>Gestionar Usuarios</span>
                </a>
                <a href="#" class="setting-item">
                    <span class="setting-icon">ğŸ“Š</span>
                    <span>Reportes Avanzados</span>
                </a>
            </div>
        </div>

        <!-- Notificaciones -->
        <div class="dashboard-card">
            <h3>ğŸ”” Notificaciones</h3>
            <div class="notifications-list">
                <div class="notification-item unread">
                    <div class="notification-icon">ğŸ‘¤</div>
                    <div class="notification-content">
                        <p><strong>5 nuevos tributos</strong> esperan acreditaciÃ³n</p>
                        <span class="time">Hace 2 horas</span>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">ğŸ†</div>
                    <div class="notification-content">
                        <p>Competencia "Algoritmos BÃ¡sicos" finalizada</p>
                        <span class="time">Hace 1 dÃ­a</span>
                    </div>
                </div>
                <div class="notification-item">
                    <div class="notification-icon">ğŸ“§</div>
                    <div class="notification-content">
                        <p>Nuevo mensaje del mentor del Distrito 5</p>
                        <span class="time">Hace 2 dÃ­as</span>
                    </div>
                </div>
            </div>
        </div>

        {% include 'dashboards/components/recent_activity.html' %}
        </div>
    </div>
</div>
{% endblock %}
